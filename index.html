<!DOCTYPE html>
<html>
<head>
  <title>Stock Dashboard</title>
  <style>
    body { font-family: Arial; padding: 20px; }
    select, input, button { padding: 6px; margin: 5px; }
    .green { color: green; font-weight: bold; }
    .red { color: red; font-weight: bold; }
    .card { border: 1px solid #ccc; padding: 15px; margin-top: 15px; border-radius: 8px; }
  </style>
</head>
<body>

<h2>ðŸ“ˆ Stock Dashboard</h2>

<label>Select Stock:</label>
<select id="stockSelect"></select>

<label>Select Date:</label>
<input type="date" id="dateInput">

<button onclick="loadStock()">Submit</button>

<div id="output" class="card"></div>

<script>
const stocks = [
"SAGILITY","GROWWGOLD","JPPOWER","IDEA","BSE","GROWWLSILVER",
"HDFCBANK","SBIN","GREAVESCOT","NTPCGREEN","TCS","KIMS",
"MON100","HARAFIN","RBLBANK","IRIS","MEESHO","HINDCOPPER","RVNL"
];

const select = document.getElementById("stockSelect");
stocks.forEach(s => {
  const opt = document.createElement("option");
  opt.value = s;
  opt.textContent = s;
  select.appendChild(opt);
});

// Set today date
document.getElementById("dateInput").valueAsDate = new Date();

function random(min,max){ return (Math.random()*(max-min)+min).toFixed(2); }

function generateMockCandle(){
  let open = parseFloat(random(900,1100));
  let high = open + parseFloat(random(2,20));
  let low = open - parseFloat(random(2,20));
  let close = parseFloat(random(low, high));
  let volume = Math.floor(random(100000,5000000));
  return {open, high, low, close, volume};
}

function calcRSI(closes){
  let gains = 0, losses = 0;
  for(let i=1;i<closes.length;i++){
    let diff = closes[i] - closes[i-1];
    if(diff>0) gains += diff;
    else losses -= diff;
  }
  let rs = gains / (losses || 1);
  return (100 - (100/(1+rs))).toFixed(1);
}

function loadStock(){
  const stock = select.value;
  const date = document.getElementById("dateInput").value;

  // Generate fake historical
  let candles = [];
  for(let i=0;i<15;i++) candles.push(generateMockCandle());

  const today = candles[candles.length-1];
  const yesterday = candles[candles.length-2];

  const pct = (((today.close - yesterday.close)/yesterday.close)*100).toFixed(2);
  const color = pct >= 0 ? "green" : "red";

  const ema = (candles.slice(-5).reduce((a,b)=>a+b.close,0)/5).toFixed(2);
  const rsi = calcRSI(candles.map(c=>c.close));

  const support = Math.min(...candles.map(c=>c.low)).toFixed(2);
  const resistance = Math.max(...candles.map(c=>c.high)).toFixed(2);

  let suggestion = "WAIT";
  if(rsi < 35) suggestion = "BUY";
  if(rsi > 70) suggestion = "SELL";

  document.getElementById("output").innerHTML = `
  <h3>${stock} (${date})</h3>

  Open: â‚¹${today.open}<br>
  High: â‚¹${today.high}<br>
  Low: â‚¹${today.low}<br>
  Close: â‚¹${today.close}<br>

  % Change: <span class="${color}">${pct}%</span><br><br>

  <b>Indicators</b><br>
  EMA(5): ${ema}<br>
  RSI(14): ${rsi}<br>
  Support: â‚¹${support}<br>
  Resistance: â‚¹${resistance}<br><br>

  <b>Suggestions</b><br>
  Intraday: ${suggestion}<br>
  SL: ${(today.close * 0.98).toFixed(2)}<br>
  Target: ${(today.close * 1.02).toFixed(2)}<br><br>

  Delivery: ${rsi < 40 ? "ACCUMULATE" : "WAIT"}<br>
  GTT Idea: Buy above â‚¹${resistance}<br>
  `;
}

// Auto load latest
loadStock();
</script>

</body>
</html>
