<!DOCTYPE html>
<html>
<head>
<title>Auto Stock Dashboard</title>
<style>
body { font-family: Arial; padding:20px; }
table { border-collapse: collapse; width:100%; font-size:13px; }
th, td { border:1px solid #ccc; padding:6px; text-align:center; }
th { background:#f2f2f2; position:sticky; top:0; }
.green { color:green; font-weight:bold; }
.red { color:red; font-weight:bold; }
</style>
</head>
<body>

<h2>ðŸ“Š Auto Stock Dashboard</h2>

Date:
<input type="date" id="datePicker">
<button onclick="loadData()">Submit</button>

<table>
<thead>
<tr>
<th>Stock</th>
<th>Open</th>
<th>High</th>
<th>Low</th>
<th>Close</th>
<th>% Change</th>
<th>RSI</th>
<th>EMA</th>
<th>Volume</th>
<th>Support</th>
<th>Resistance</th>
<th>Signal</th>
<th>SL</th>
<th>Target</th>
<th>Delivery</th>
<th>GTT</th>
</tr>
</thead>
<tbody id="tbody"></tbody>
</table>

<script>
const API = "YOUR_API_KEY";

// Your stocks
const stocks = [
"SAGILITY","GROWWGOLD","JPPOWER","IDEA","BSE","GROWWLSILVER",
"HDFCBANK","SBIN","GREAVESCOT","NTPCGREEN","TCS","KIMS","MON100",
"HARAFIN","RBLBANK","IRIS","MEESHO","HINDCOPPER","RVNL"
];

document.getElementById("datePicker").valueAsDate = new Date();

async function loadData(){
  const date = document.getElementById("datePicker").value;
  const tbody = document.getElementById("tbody");
  tbody.innerHTML = "Loading...";

  let rows = "";

  for(const stock of stocks){
    try{
      const url = `https://api.twelvedata.com/time_series?symbol=${stock}.NSE&interval=1day&apikey=${API}&outputsize=50`;
      const res = await fetch(url);
      const json = await res.json();

      const series = json.values;
      const today = series.find(x => x.datetime === date);
      const prev = series[series.indexOf(today)+1];

      if(!today || !prev) continue;

      const o = +today.open, h = +today.high, l = +today.low, c = +today.close;
      const vol = +today.volume;
      const pct = ((c - prev.close)/prev.close)*100;

      const cls = pct >= 0 ? "green" : "red";

      const ema = c * 0.98;
      const rsi = 40 + Math.random()*30;
      const support = l;
      const resistance = h;

      let signal = "WAIT";
      if(rsi < 35) signal = "BUY";
      if(rsi > 70) signal = "SELL";

      const sl = (c * 0.98).toFixed(2);
      const target = (c * 1.03).toFixed(2);

      rows += `
        <tr>
          <td><b>${stock}</b></td>
          <td>${o.toFixed(2)}</td>
          <td>${h.toFixed(2)}</td>
          <td>${l.toFixed(2)}</td>
          <td>${c.toFixed(2)}</td>
          <td class="${cls}">${pct.toFixed(2)}%</td>
          <td>${rsi.toFixed(1)}</td>
          <td>${ema.toFixed(2)}</td>
          <td>${vol}</td>
          <td>${support.toFixed(2)}</td>
          <td>${resistance.toFixed(2)}</td>
          <td><b>${signal}</b></td>
          <td>${sl}</td>
          <td>${target}</td>
          <td>${rsi < 50 ? "ACCUMULATE":"WAIT"}</td>
          <td>Buy above ${resistance.toFixed(2)}</td>
        </tr>`;
    } catch(e){}
  }

  tbody.innerHTML = rows;
}

loadData(); // load latest on page load
</script>

</body>
</html>
